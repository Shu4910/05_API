<!DOCTYPE html>
<html>
  <head>
    <title>Current Location</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3kO2w0_C6H9HovP317lJWtbJf88aMfYY"></script>
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <script src="./index2.js"></script>
  </head>


  <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
<!-- Firestore -->
<script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>

<!-- 9.1.0ã§ã¯ã†ã¾ãã„ã‹ãªã„ç†ç”±ã¨gitigonoreã®æ–¹æ³•ã‚’æ•™ãˆã¦ãã ã•ã„ -->


<body>
  <h1>æ£®ç”°Tã‚·ãƒ£ãƒ„è³¼å…¥ã‚µã‚¤ãƒˆğŸ¤—</h1>
  <p class="kounyu">é€ä»˜ã™ã‚‹ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
  <button id="getLocationButton">ç¾åœ¨åœ°ã‹ã‚‰å–å¾—ã—ã¦å…¥åŠ›ã™ã‚‹</button>
  <br>
  <p>éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ã€ä½æ‰€ã‚’å–å¾—ã™ã‚‹</div></p>
  <form>
    <table>
        <tbody>
            <tr>
                <th>éƒµä¾¿ç•ªå·</th>
                <td>
                    <input id="input" class="zipcode" type="text" name="zipcode" value="" placeholder="ä¾‹)8120012">
                    <button id="search" type="button">ä½æ‰€æ¤œç´¢</button>
                    <p id="error"></p>
                </td>
            </tr>

            <tr>
                <th>éƒ½é“åºœçœŒ</th>
                <td><input id="address1" type="text" name="address1" value=""></td>
            </tr>

            <tr>
                <th>å¸‚åŒºç”ºæ‘</th>
                <td><input id="address2" type="text" name="address2" value=""></td>
            </tr>

            <tr>
                <th>ç”ºåŸŸ</th>
                <td><input id="address3" type="text" name="address3" value=""></td>
            </tr>

            <tr>
              <th>ç•ªåœ°</th>
              <td><input id="address4" type="text" name="address4" value=""></td>
          </tr>

          <tr>
            <th>ãƒãƒ³ã‚·ãƒ§ãƒ³åãƒ»éƒ¨å±‹ç•ªå·</th>
            <td><input id="address5" type="text" name="address5" value=""></td>
        </tr>

        <tr>
            <th>å®›å</th>
            <td><input id="address6" type="text" name="address6" value=""></td>
        </tr>



        </tbody>
    </table>
</form>
<br>
<button id="moveToPurchaseSite">è³¼å…¥ã‚µã‚¤ãƒˆã«ç§»å‹•ã™ã‚‹</button>
</body>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-database.js"></script>
<script src="keys/firebase.js"></script>

<script>
// Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  // saveToFirebase.js

function saveToFirebase() {
  // Get form values
  const zipcode = document.getElementById('input').value;
  const prefecture = document.getElementById('address1').value;
  const city = document.getElementById('address2').value;
  const town = document.getElementById('address3').value;
  const street = document.getElementById('address4').value;
  const apartment = document.getElementById('address5').value;
  const name = document.getElementById('address6').value;

  // Reference to your Firebase database
  var dbRef = firebase.database().ref();

  // Data to save
  var dataToSave = {
    zipcode: zipcode,
    prefecture: prefecture,
    city: city,
    town: town,
    street: street,
    apartment: apartment,
    name: name
  };

  // Save to Firebase
  dbRef.push(dataToSave, function(error) {
    if (error) {
      console.log("Data could not be saved." + error);
    } else {
      console.log("Data saved successfully.");

      // Move to purchase site
      location.href='index2.html';
    }
  });
}

// Attach click event listener to the button
document.getElementById('moveToPurchaseSite').addEventListener('click', saveToFirebase);

</script>


<script src="https://cdn.jsdelivr.net/npm/fetch-jsonp@1.1.3/build/fetch-jsonp.min.js"></script>
<script src="js/script.js"></script>

</html>
